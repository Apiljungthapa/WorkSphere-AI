<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Enhanced Employee Dashboard</title>
    <style>
        @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap");

        :root {
            --primary-gradient: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --tertiary-gradient: linear-gradient(135deg, #fad961 0%, #f76b1c 100%);
            --background-color: #f0f4f8;
            --card-background: #ffffff;
            --text-color: #333333;
            --text-light: #666666;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        body {
            font-family: "Poppins", sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            padding: 10px 15px;
            background: var(--primary-gradient);
            color: white;
            text-decoration: none;
            border-radius: 5px;
            margin-bottom: 30px;
            transition: var(--transition);
        }

        .back-button:hover {
            opacity: 0.9;
        }

        .back-button i {
            margin-right: 10px;
        }

        .dashboard-header {
            background: var(--primary-gradient);
            color: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            margin-bottom: 40px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .profile-section {
            display: flex;
            align-items: center;
        }

        .profile-image {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid white;
            margin-right: 30px;
        }

        .profile-info h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 600;
        }

        .profile-info p {
            margin: 10px 0;
            font-size: 1.1em;
            opacity: 0.9;
        }

        .edit_buttons {
            display: flex;
            gap: 10px;
        }

        .corner-button {
            padding: 10px 20px;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: var(--transition);
            border: none;
            cursor: pointer;
            font-weight: bold;
        }

        .open-html-btn {
            background-color: #4caf50;
        }

        .delete-btn {
            background-color: #f44336;
        }

        .corner-button:hover {
            opacity: 0.9;
        }

        .section-title {
            font-size: 2em;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
        }

        .task-card {
            background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }

        .task-name {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }

        .task-description {
            margin-bottom: 20px;
            color: #555;
        }

        .task-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .download-link,
        .delete-link,
        .approve-btn {
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }

        .download-link {
            background-color: #4caf50;
            color: white;
        }

        .download-link:hover {
            background-color: #45a049;
        }

        .delete-link {
            background-color: #f44336;
            color: white;
        }

        .delete-link:hover {
            background-color: #da190b;
        }

        .approve-btn {
        background-color: #4CAF50; /* Default green */
        color: white;
        border: none;
        padding: 10px 20px;
        text-align: center;
        font-size: 16px;
        cursor: pointer;
        border-radius: 5px;
        transition: background-color 0.3s;
    }

    .approve-btn:hover {
        background-color: #45a049; /* Darker green on hover */
    }

    .approve-btn:disabled {
        background-color: #c3d2f7; /* Red color when disabled */
        color: white;
        opacity: 0.8; /* Slight transparency */
        cursor: not-allowed; /* Show not-allowed cursor */
    }


        .recent-posts {
            background-color: var(--card-background);
            border-radius: 15px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-top: 40px;
        }

        .post-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .post-card {
            background: var(--background-color);
            border-radius: 15px;
            box-shadow: var(--shadow);
            padding: 25px;
            transition: var(--transition);
        }

        .post-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .post-title {
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.2em;
            color: #2c3e50;
        }

        .post-excerpt {
            font-size: 0.95em;
            color: var(--text-light);
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .dashboard-header {
                flex-direction: column;
                align-items: center;
                text-align: center;
                padding: 30px;
            }

            .profile-section {
                flex-direction: column;
                margin-bottom: 20px;
            }

            .profile-image {
                margin-right: 0;
                margin-bottom: 20px;
            }

            .edit_buttons {
                flex-direction: column;
                width: 100%;
            }

           

            .corner-button {
                width: 100%;
                text-align: center;
            }

            .task-actions {
                flex-direction: column;
                gap: 10px;
            }

            .download-link,
            .delete-link,
            .approve-btn {
                width: 100%;
                text-align: center;
            }

            .post-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 20px 10px;
            }

            .dashboard-header {
                padding: 20px;
            }

            .profile-info h1 {
                font-size: 1.8em;
            }

            .profile-info p {
                font-size: 0.9em;
            }

            .section-title {
                font-size: 1.5em;
            }

          

            .recent-posts {
                padding: 20px;
            }

            .post-card {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="{{ url_for('fetch_details_employees') }}" class="back-button">
            <i class="fas fa-arrow-left"></i> Back
        </a>

        <header class="dashboard-header">
            <div class="profile-section">
                <img src="https://i.pravatar.cc/300" alt="Employee Photo" class="profile-image" />
                <div class="profile-info">
                    <h1>{{ employee.full_name }}</h1>
                    <p>{{ employee.position }} | {{ employee.department_name }}</p>
                    <p>Employee ID: {{ employee.user_id }}</p>
                </div>
            </div>
            <div class="edit_buttons">
                <a href="updateEmployee.html?user_id={{ employee.user_id }}" class="corner-button open-html-btn">Update Details</a>
                <a href="/delete_user/{{ employee.user_id }}" class="corner-button delete-btn">Remove Profile</a>
            </div>
        </header>

        <main>

            <section class="pending-tasks">
                <h2 class="section-title">Assigned Tasks </h2>
                {% for task in pending_tasks %}
                    <div class="task-card">
                        <div class="task-name">{{ task.title }}</div>
                        <div class="task-description">{{ task.description }}</div>
                        <div class="task-actions">
                            <!-- Optionally, add more task actions like 'Complete Task', 'Edit Task', etc. -->
                            <form action="/delete_task/{{ task.task_id }}?user_id={{ employee.user_id }}" method="POST" onsubmit="return confirm('Are you sure you want to delete this task?');">
                                <button type="submit" class="delete-link">Delete Task</button>
                            </form>
                        </div>
                    </div>
                {% endfor %}
            </section>
            


            <section class="submitted-tasks">
                <h2 class="section-title">Submitted Tasks</h2>

                {% for task in submitted_or_approved_tasks %}
                
                    <div class="task-card">
                        <div class="task-name">{{ task.title }}</div>
                        <div class="task-description">{{ task.description }}</div>
                        <div class="task-actions">

                            <div class="task-actions">
                                {% if task.docs_path %}
                                    <a href="/download/{{ task.task_id }}" class="download-link">Download File</a>
                                {% else %}
                                    <p>No file available</p>
                                {% endif %}
                            </div>
                            <form method="post" action="/approve_task">
                                <input type="hidden" name="task_id" value="{{ task.task_id }}">
                            
                            <button type="submit" class="approve-btn" 
                            {% if task.status|lower == 'approved' %}disabled{% endif %}>
                            <i class="fas fa-check"></i> Approve Task
                            </button>

                            </form>
                            
                            

                            <form action="/delete_task/{{ task.task_id }}?user_id={{ employee.user_id }}" method="POST" onsubmit="return confirm('Are you sure you want to delete this task?');">
                                <button type="submit" class="delete-link">Delete Task</button>
                            </form>
                            
                            
                            </div>
                    </div>

                {% endfor %}
            </section>

            <section class="recent-posts">
                <h2 class="section-title">Recent Posts</h2>

                <div class="post-grid">
                    <div class="post-card">
                        <div class="post-title">New design principles for our brand</div>
                        <div class="post-excerpt">
                            Exploring innovative ways to represent our brand identity through cohesive design elements and visual storytelling. Our new approach focuses on simplicity, versatility, and emotional connection with our audience.
                        </div>
                    </div>
                    <div class="post-card">
                        <div class="post-title">Upcoming design trends for 2025</div>
                        <div class="post-excerpt">
                            Predicting the next big shifts in design and user experience, from augmented reality interfaces to sustainable digital practices. We're exploring how these trends will shape the future of our industry and user interactions.
                        </div>
                    </div>
                    <div class="post-card">
                        <div class="post-title">My experience at DesignCon 2024</div>
                        <div class="post-excerpt">
                            Insights and inspirations from the leading design conference, featuring cutting-edge technologies and thought-provoking discussions. I've gathered valuable insights on AI-driven design and sustainable UX practices.
                        </div>
                    </div>
                    <div class="post-card">
                        <div class="post-title">Improving user engagement through UI</div>
                        <div class="post-excerpt">
                            Strategies for creating more engaging and intuitive interfaces, focusing on micro-interactions and personalized user experiences. We're implementing these techniques to enhance our product's usability and user satisfaction.
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>
</body>
</html>